#!groovy

stage('Initial'){
node{
echo 'Initial stage'
dir('/home/rainman/Downloads'){

    stash includes: '*.torrent', name: 'stash_stuff'
    }
    }
}


stage('Build') {
   parallel linux: {
        node('python') {
        echo 'Building in python node(aka localhost)'
	sh '/home/rainman/Downloads/pipe.sh'
	
    }
 },
    linux2: {
       node('pi') {
        echo 'Building in raspberry node'
	sh '/home/rainman/Downloads/pipe.sh'
    }
 },
    
    linux3: {
        node('pi') {
        echo 'Deploying....'
	writeFile file:'test',text:'Deployed'
	unstash 'stash_stuff'
    }
  }
}